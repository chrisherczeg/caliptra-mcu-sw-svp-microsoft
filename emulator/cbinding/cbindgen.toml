# cbindgen configuration for emulator C bindings

language = "C"
style = "both"
include_guard = "EMULATOR_CBINDING_H"
pragma_once = true
autogen_warning = "/* Warning, this file is autogenerated by cbindgen. Don't modify this manually. */"
include_version = true
namespace = ""
tab_width = 4
line_length = 100
documentation = true
documentation_style = "doxy"
usize_is_size_t = true
cpp_compat = true

[defines]
"feature = serde" = "CBINDGEN_SERDE"

[export]
exclude = [
    "Option_CExternalReadCallback",
    "Option_CExternalWriteCallback"
]
include = [
    "EmulatorError",
    "CStepAction", 
    "CEmulator",
    "CEmulatorConfig",
    "emulator_get_size",
    "emulator_get_alignment", 
    "emulator_init",
    "emulator_step",
    "emulator_destroy",
    "emulator_get_uart_output"
]

[export.rename]

[layout]
packed = "EMULATOR_PACKED"
aligned_n = "EMULATOR_ALIGN"

[fn]
rename_args = "GeckoCase"
must_use = "EMULATOR_MUST_USE"
no_return = "EMULATOR_NO_RETURN"

[struct]
rename_fields = "GeckoCase"
must_use = "EMULATOR_MUST_USE"

[enum]
rename_variants = "GeckoCase"
must_use = "EMULATOR_MUST_USE"

[const]
allow_static_const = true
allow_constexpr = false

[macro_expansion]
bitflags = true
